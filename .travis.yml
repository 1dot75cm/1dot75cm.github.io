---
language: node_js
node_js:
    - "4.2"

git:
    submodules: true

before_install:
    - echo $SSH_KEY | base64 --decode > ~/.ssh/id_rsa
    - chmod 0600 ~/.ssh/id_rsa
    - echo $SSH_PUBLIC_KEY | base64 --decode > ~/.ssh/id_rsa.pub
    - chmod 0644 ~/.ssh/id_rsa.pub

install:
    - npm install -g hexo-cli
    - npm install

before_script:
    - git config --global user.name 'Travis CI'
    - git config --global user.email 'travis-ci@travis-ci.org'

script:
    - hexo generate

after_success:
    - chmod 0755 deploy.sh
    - sh deploy.sh
